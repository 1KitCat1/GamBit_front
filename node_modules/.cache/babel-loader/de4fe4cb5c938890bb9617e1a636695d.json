{"ast":null,"code":"import _toConsumableArray from \"E:\\\\Coding\\\\WebFront\\\\Shuttler_front\\\\shuttler-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:\\\\Coding\\\\WebFront\\\\Shuttler_front\\\\shuttler-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"E:\\\\Coding\\\\WebFront\\\\Shuttler_front\\\\shuttler-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"E:\\\\Coding\\\\WebFront\\\\Shuttler_front\\\\shuttler-web\\\\src\\\\components\\\\controlPanels\\\\OrganizerPanelRoutes.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport Table from \"react-bootstrap/Table\";\nimport { Spinner } from \"react-bootstrap\";\nimport EditableRowRoute from \"../tableRows/EditableRowRoute\";\nimport ReadOnlyRowRoute from \"../tableRows/ReadOnlyRowRoute\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { BiAddToQueue } from \"react-icons/bi\";\nimport Toast from \"react-bootstrap/Toast\";\nimport ToastContainer from \"react-bootstrap/ToastContainer\";\nimport { FormattedMessage } from \"react-intl\";\nvar OrganizerPanelRoutes = function OrganizerPanelRoutes() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    routes = _useState2[0],\n    setRoutes = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    show = _useState4[0],\n    setShow = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    showAddForm = _useState6[0],\n    setShowAddForm = _useState6[1];\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n  var handleCloseAddForm = function handleCloseAddForm() {\n    return setShowAddForm(false);\n  };\n  var handleShowAddForm = function handleShowAddForm() {\n    return setShowAddForm(true);\n  };\n  var allowedTypes = [\"bus\", \"trolleybus\", \"tram\"];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    stops = _useState8[0],\n    setStops = _useState8[1];\n  var _useState9 = useState({\n      number: \"\",\n      type: \"\"\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    addFormData = _useState10[0],\n    setAddFormData = _useState10[1];\n  var _useState11 = useState({\n      id: \"\",\n      number: \"\",\n      type: \"\"\n    }),\n    _useState12 = _slicedToArray(_useState11, 2),\n    editFormData = _useState12[0],\n    setEditFormData = _useState12[1];\n  var _useState13 = useState( /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"keepinmind\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 42\n      }\n    })),\n    _useState14 = _slicedToArray(_useState13, 2),\n    message = _useState14[0],\n    setMessage = _useState14[1];\n  var _useState15 = useState(\"\"),\n    _useState16 = _slicedToArray(_useState15, 2),\n    currNumber = _useState16[0],\n    setCurrNumber = _useState16[1];\n  var _useState17 = useState(null),\n    _useState18 = _slicedToArray(_useState17, 2),\n    editRouteId = _useState18[0],\n    setEditRouteId = _useState18[1];\n  var userId = JSON.parse(Cookies.get(\"_auth_state\")).data.id;\n  var handleEditFormChange = function handleEditFormChange(event) {\n    event.preventDefault();\n    var fieldName = event.target.getAttribute(\"name\");\n    var fieldValue = event.target.value;\n    var newFormData = _objectSpread({}, editFormData);\n    newFormData[fieldName] = fieldValue;\n    setEditFormData(newFormData);\n  };\n  var handleEditFormSubmit = function handleEditFormSubmit(event) {\n    event.preventDefault();\n    var editedRoute = {\n      id: editRouteId,\n      type: editFormData.type,\n      number: editFormData.number\n    };\n    console.log(routes);\n    console.log(\"Type: \" + editedRoute.type);\n    console.log(\"Number: \" + editedRoute.number);\n    var index = allowedTypes.indexOf(editedRoute.type);\n    axios({\n      url: \"https://localhost:8443/api/v1/organizer/updateRoute/\" + editedRoute.id,\n      method: \"put\",\n      data: {\n        number: editedRoute.number,\n        type: allowedTypes[index]\n      },\n      headers: {\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n      }\n    }).then(function (response) {\n      setMessage( /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"routeupdated\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 20\n        }\n      }));\n      handleShow();\n      console.log(response.data);\n      var newRoutes = _toConsumableArray(routes);\n      var index = routes.findIndex(function (route) {\n        return route.id === editRouteId;\n      });\n      newRoutes[index].type = editedRoute.type;\n      newRoutes[index].number = editedRoute.number;\n      setRoutes(newRoutes);\n      setEditRouteId(null);\n    }).catch(function (err) {\n      setMessage( /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"numbertaken\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 20\n        }\n      }));\n      handleShow();\n    });\n  };\n  var handleAddFormChange = function handleAddFormChange(event) {\n    event.preventDefault();\n    var fieldName = event.target.getAttribute(\"name\");\n    var fieldValue = event.target.value;\n    var newFormData = _objectSpread({}, addFormData);\n    newFormData[fieldName] = fieldValue;\n    setAddFormData(newFormData);\n  };\n  var handleAddFormSubmit = function handleAddFormSubmit(event) {\n    event.preventDefault();\n    axios({\n      url: \"https://localhost:8443/api/v1/organizer/createRoute/\" + userId,\n      method: \"post\",\n      data: {\n        number: addFormData.number,\n        type: addFormData.type\n      },\n      headers: {\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n      }\n    }).then(function (response) {\n      axios({\n        url: \"https://localhost:8443/api/v1/routes/getByNumber?number=\" + addFormData.number,\n        method: \"get\",\n        headers: {\n          Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n        }\n      }).then(function (responseSec) {\n        setMessage( /*#__PURE__*/React.createElement(FormattedMessage, {\n          id: \"routeadded\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 24\n          }\n        }));\n        handleShow();\n        console.log(responseSec.data);\n        var newRoutes = [].concat(_toConsumableArray(routes), [responseSec.data]);\n        setRoutes(newRoutes);\n      }).catch(function (err) {\n        setMessage(err);\n        handleShow();\n        console.log(err);\n      });\n    }).catch(function (err) {\n      setMessage(err);\n      handleShow();\n      console.log(err);\n    });\n  };\n  var handleEditClick = function handleEditClick(event, route) {\n    event.preventDefault();\n    setEditRouteId(route.id);\n    var formValues = {\n      id: route.id,\n      type: route.type,\n      number: route.number\n    };\n    setEditFormData(formValues);\n  };\n  var handleCancelClick = function handleCancelClick() {\n    setEditRouteId(null);\n  };\n  var handleDeleteClick = function handleDeleteClick(routeId) {\n    axios({\n      url: \"https://localhost:8443/api/v1/organizer/deleteRoute/\" + routeId,\n      method: \"delete\",\n      headers: {\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n      }\n    }).then(function (response) {\n      setMessage( /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"routedeleted\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 20\n        }\n      }));\n      handleShow();\n      console.log(response.data);\n    }).catch(function (err) {\n      setMessage(err);\n      handleShow();\n      console.log(err);\n    });\n    var newRoutes = _toConsumableArray(routes);\n    var index = routes.findIndex(function (route) {\n      return route.id === routeId;\n    });\n    newRoutes.splice(index, 1);\n    setRoutes(newRoutes);\n  };\n  useEffect(function () {\n    setShow(true);\n    axios({\n      url: \"https://localhost:8443/api/v1/organizer/getRoutes/\" + userId,\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n      }\n    }).then(function (response) {\n      setRoutes(response.data);\n      console.log(response.data);\n    }).catch(function (err) {\n      console.log(err);\n    });\n    axios({\n      url: \"https://localhost:8443/api/v1/stops\",\n      method: \"get\",\n      headers: {\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\")\n      }\n    }).then(function (response) {\n      setStops(response.data);\n      stops.sort(function (a, b) {\n        return a.street > b.street;\n      });\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ToastContainer, {\n    className: \"p-3\",\n    position: \"bottom-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toast, {\n    onClose: function onClose() {\n      return setShow(false);\n    },\n    show: show,\n    delay: 3000,\n    autohide: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toast.Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"holder.js/20x20?text=%20\",\n    className: \"rounded me-2\",\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"me-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, \"Shuttler\"), /*#__PURE__*/React.createElement(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, \"Important!\")), /*#__PURE__*/React.createElement(Toast.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, message))), /*#__PURE__*/React.createElement(Modal, {\n    show: showAddForm,\n    onHide: handleCloseAddForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleAddFormSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"Add a route\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      margin: \"5px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"type\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 15\n    }\n  }), \":\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    required: \"required\",\n    placeholder: \"Enter the type\",\n    name: \"type\",\n    onChange: handleAddFormChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"bus\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, \"bus\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"trolleybus\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }, \"trolleybus\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"tram\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, \"tram\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      margin: \"5px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"number\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }), \":\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    min: \"1\",\n    max: \"999\",\n    required: \"required\",\n    placeholder: \"Enter the number\",\n    name: \"number\",\n    onChange: handleAddFormChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseAddForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"cancel\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    onClick: handleCloseAddForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"add\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"organizer-header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      color: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"yourroutes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"search\",\n    placeholder: \"Search by number\",\n    className: \"me-2\",\n    \"aria-label\": \"Search\",\n    style: {\n      width: \"200px\"\n    },\n    onChange: function onChange(e) {\n      setCurrNumber(e.target.value);\n      console.log(currNumber);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      handleShowAddForm();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"add\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(BiAddToQueue, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 43\n    }\n  })))), routes !== null ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleEditFormSubmit,\n    style: {\n      margin: \"0px 14% 150px 14%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    variant: \"light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 17\n    }\n  }, \"Id\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"type\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"number\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"stops\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormattedMessage, {\n    id: \"actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 13\n    }\n  }, routes.map(function (currRoute) {\n    if (currRoute.number !== null && currRoute.number.toString().indexOf(currNumber) !== -1 || currNumber === \"\") {\n      if (currRoute.id === editRouteId) {\n        return /*#__PURE__*/React.createElement(EditableRowRoute, {\n          route: currRoute,\n          stops: stops,\n          editFormData: editFormData,\n          handleEditFormChange: handleEditFormChange,\n          handleCancelClick: handleCancelClick,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 23\n          }\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(ReadOnlyRowRoute, {\n          route: currRoute,\n          handleEditClick: handleEditClick,\n          handleDeleteClick: handleDeleteClick,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 23\n          }\n        });\n      }\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  })))) : /*#__PURE__*/React.createElement(Spinner, {\n    style: {\n      color: \"white\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 9\n    }\n  }));\n};\nexport default OrganizerPanelRoutes;","map":{"version":3,"names":["React","useState","useEffect","axios","Cookies","Table","Spinner","EditableRowRoute","ReadOnlyRowRoute","Form","Button","Modal","BiAddToQueue","Toast","ToastContainer","FormattedMessage","OrganizerPanelRoutes","routes","setRoutes","show","setShow","showAddForm","setShowAddForm","handleShow","handleCloseAddForm","handleShowAddForm","allowedTypes","stops","setStops","number","type","addFormData","setAddFormData","id","editFormData","setEditFormData","message","setMessage","currNumber","setCurrNumber","editRouteId","setEditRouteId","userId","JSON","parse","get","data","handleEditFormChange","event","preventDefault","fieldName","target","getAttribute","fieldValue","value","newFormData","handleEditFormSubmit","editedRoute","console","log","index","indexOf","url","method","headers","Authorization","then","response","newRoutes","findIndex","route","catch","err","handleAddFormChange","handleAddFormSubmit","responseSec","handleEditClick","formValues","handleCancelClick","handleDeleteClick","routeId","splice","sort","a","b","street","margin","color","display","flexDirection","width","e","map","currRoute","toString"],"sources":["E:/Coding/WebFront/Shuttler_front/shuttler-web/src/components/controlPanels/OrganizerPanelRoutes.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport { Spinner } from \"react-bootstrap\";\r\nimport EditableRowRoute from \"../tableRows/EditableRowRoute\";\r\nimport ReadOnlyRowRoute from \"../tableRows/ReadOnlyRowRoute\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { BiAddToQueue } from \"react-icons/bi\";\r\nimport Toast from \"react-bootstrap/Toast\";\r\nimport ToastContainer from \"react-bootstrap/ToastContainer\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nconst OrganizerPanelRoutes = () => {\r\n  const [routes, setRoutes] = useState(null);\r\n  const [show, setShow] = useState(false);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n  const handleCloseAddForm = () => setShowAddForm(false);\r\n  const handleShowAddForm = () => setShowAddForm(true);\r\n  const allowedTypes = [\"bus\", \"trolleybus\", \"tram\"];\r\n  const [stops, setStops] = useState(null);\r\n\r\n  const [addFormData, setAddFormData] = useState({\r\n    number: \"\",\r\n    type: \"\",\r\n  });\r\n  const [editFormData, setEditFormData] = useState({\r\n    id: \"\",\r\n    number: \"\",\r\n    type: \"\",\r\n  });\r\n\r\n  const [message, setMessage] = useState(<FormattedMessage id=\"keepinmind\" />);\r\n  const [currNumber, setCurrNumber] = useState(\"\");\r\n  const [editRouteId, setEditRouteId] = useState(null);\r\n\r\n  const userId = JSON.parse(Cookies.get(\"_auth_state\")).data.id;\r\n\r\n  const handleEditFormChange = (event) => {\r\n    event.preventDefault();\r\n\r\n    const fieldName = event.target.getAttribute(\"name\");\r\n    const fieldValue = event.target.value;\r\n\r\n    const newFormData = { ...editFormData };\r\n    newFormData[fieldName] = fieldValue;\r\n\r\n    setEditFormData(newFormData);\r\n  };\r\n\r\n  const handleEditFormSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const editedRoute = {\r\n      id: editRouteId,\r\n      type: editFormData.type,\r\n      number: editFormData.number,\r\n    };\r\n\r\n    console.log(routes);\r\n    console.log(\"Type: \" + editedRoute.type);\r\n    console.log(\"Number: \" + editedRoute.number);\r\n\r\n    const index = allowedTypes.indexOf(editedRoute.type);\r\n\r\n    axios({\r\n      url:\r\n        \"https://localhost:8443/api/v1/organizer/updateRoute/\" + editedRoute.id,\r\n      method: \"put\",\r\n      data: {\r\n        number: editedRoute.number,\r\n        type: allowedTypes[index],\r\n      },\r\n      headers: {\r\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setMessage(<FormattedMessage id=\"routeupdated\" />);\r\n        handleShow();\r\n        console.log(response.data);\r\n        const newRoutes = [...routes];\r\n\r\n        const index = routes.findIndex((route) => route.id === editRouteId);\r\n\r\n        newRoutes[index].type = editedRoute.type;\r\n        newRoutes[index].number = editedRoute.number;\r\n\r\n        setRoutes(newRoutes);\r\n        setEditRouteId(null);\r\n      })\r\n      .catch((err) => {\r\n        setMessage(<FormattedMessage id=\"numbertaken\" />);\r\n        handleShow();\r\n      });\r\n  };\r\n\r\n  const handleAddFormChange = (event) => {\r\n    event.preventDefault();\r\n\r\n    const fieldName = event.target.getAttribute(\"name\");\r\n    const fieldValue = event.target.value;\r\n\r\n    const newFormData = { ...addFormData };\r\n    newFormData[fieldName] = fieldValue;\r\n\r\n    setAddFormData(newFormData);\r\n  };\r\n\r\n  const handleAddFormSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    axios({\r\n      url: \"https://localhost:8443/api/v1/organizer/createRoute/\" + userId,\r\n      method: \"post\",\r\n      data: {\r\n        number: addFormData.number,\r\n        type: addFormData.type,\r\n      },\r\n      headers: {\r\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        axios({\r\n          url:\r\n            \"https://localhost:8443/api/v1/routes/getByNumber?number=\" +\r\n            addFormData.number,\r\n          method: \"get\",\r\n          headers: {\r\n            Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n          },\r\n        })\r\n          .then((responseSec) => {\r\n            setMessage(<FormattedMessage id=\"routeadded\" />);\r\n            handleShow();\r\n            console.log(responseSec.data);\r\n\r\n            const newRoutes = [...routes, responseSec.data];\r\n            setRoutes(newRoutes);\r\n          })\r\n          .catch((err) => {\r\n            setMessage(err);\r\n            handleShow();\r\n            console.log(err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        setMessage(err);\r\n        handleShow();\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleEditClick = (event, route) => {\r\n    event.preventDefault();\r\n    setEditRouteId(route.id);\r\n\r\n    const formValues = {\r\n      id: route.id,\r\n      type: route.type,\r\n      number: route.number,\r\n    };\r\n\r\n    setEditFormData(formValues);\r\n  };\r\n\r\n  const handleCancelClick = () => {\r\n    setEditRouteId(null);\r\n  };\r\n\r\n  const handleDeleteClick = (routeId) => {\r\n    axios({\r\n      url: \"https://localhost:8443/api/v1/organizer/deleteRoute/\" + routeId,\r\n      method: \"delete\",\r\n      headers: {\r\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setMessage(<FormattedMessage id=\"routedeleted\" />);\r\n        handleShow();\r\n        console.log(response.data);\r\n      })\r\n      .catch((err) => {\r\n        setMessage(err);\r\n        handleShow();\r\n        console.log(err);\r\n      });\r\n    const newRoutes = [...routes];\r\n\r\n    const index = routes.findIndex((route) => route.id === routeId);\r\n\r\n    newRoutes.splice(index, 1);\r\n\r\n    setRoutes(newRoutes);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setShow(true);\r\n\r\n    axios({\r\n      url: \"https://localhost:8443/api/v1/organizer/getRoutes/\" + userId,\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setRoutes(response.data);\r\n        console.log(response.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    axios({\r\n      url: \"https://localhost:8443/api/v1/stops\",\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: \"Bearer_\" + Cookies.get(\"_auth\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setStops(response.data);\r\n        stops.sort(function(a, b) {\r\n          return a.street > b.street;\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer className=\"p-3\" position=\"bottom-end\">\r\n        <Toast onClose={() => setShow(false)} show={show} delay={3000} autohide>\r\n          <Toast.Header>\r\n            <img\r\n              src=\"holder.js/20x20?text=%20\"\r\n              className=\"rounded me-2\"\r\n              alt=\"\"\r\n            />\r\n            <strong className=\"me-auto\">Shuttler</strong>\r\n            <small>Important!</small>\r\n          </Toast.Header>\r\n          <Toast.Body>{message}</Toast.Body>\r\n        </Toast>\r\n      </ToastContainer>\r\n      <Modal show={showAddForm} onHide={handleCloseAddForm}>\r\n        <form onSubmit={handleAddFormSubmit}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>\r\n              <FormattedMessage id=\"Add a route\" />\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <label style={{ margin: \"5px\" }}>\r\n              <FormattedMessage id=\"type\" />:\r\n            </label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              required=\"required\"\r\n              placeholder=\"Enter the type\"\r\n              name=\"type\"\r\n              onChange={handleAddFormChange}\r\n            >\r\n              <option value=\"bus\">bus</option>\r\n              <option value=\"trolleybus\">trolleybus</option>\r\n              <option value=\"tram\">tram</option>\r\n            </Form.Control>\r\n            <br />\r\n            <label style={{ margin: \"5px\" }}>\r\n              <FormattedMessage id=\"number\" />:\r\n            </label>\r\n            <Form.Control\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"999\"\r\n              required=\"required\"\r\n              placeholder=\"Enter the number\"\r\n              name=\"number\"\r\n              onChange={handleAddFormChange}\r\n            />\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleCloseAddForm}>\r\n              <FormattedMessage id=\"cancel\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"submit\"\r\n              onClick={handleCloseAddForm}\r\n            >\r\n              <FormattedMessage id=\"add\" />\r\n            </Button>\r\n          </Modal.Footer>\r\n        </form>\r\n      </Modal>\r\n      <div className=\"organizer-header\">\r\n        <h3 style={{ color: \"white\" }}>\r\n          <FormattedMessage id=\"yourroutes\" />\r\n        </h3>\r\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n          <Form.Control\r\n            type=\"search\"\r\n            placeholder=\"Search by number\"\r\n            className=\"me-2\"\r\n            aria-label=\"Search\"\r\n            style={{ width: \"200px\" }}\r\n            onChange={(e) => {\r\n              setCurrNumber(e.target.value);\r\n              console.log(currNumber);\r\n            }}\r\n          />\r\n          <Button\r\n            onClick={() => {\r\n              handleShowAddForm();\r\n            }}\r\n          >\r\n            <FormattedMessage id=\"add\" /> <BiAddToQueue />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {routes !== null ? (\r\n        <form\r\n          onSubmit={handleEditFormSubmit}\r\n          style={{ margin: \"0px 14% 150px 14%\" }}\r\n        >\r\n          <Table striped bordered hover variant=\"light\">\r\n            <thead>\r\n              <tr>\r\n                <th>Id</th>\r\n                <th>\r\n                  <FormattedMessage id=\"type\" />\r\n                </th>\r\n                <th>\r\n                  <FormattedMessage id=\"number\" />\r\n                </th>\r\n                <th>\r\n                  <FormattedMessage id=\"stops\" />\r\n                </th>\r\n                <th>\r\n                  <FormattedMessage id=\"actions\" />\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {routes.map((currRoute) => {\r\n                if (\r\n                  (currRoute.number !== null &&\r\n                    currRoute.number.toString().indexOf(currNumber) !== -1) ||\r\n                  currNumber === \"\"\r\n                ) {\r\n                  if (currRoute.id === editRouteId) {\r\n                    return (\r\n                      <EditableRowRoute\r\n                        route={currRoute}\r\n                        stops={stops}\r\n                        editFormData={editFormData}\r\n                        handleEditFormChange={handleEditFormChange}\r\n                        handleCancelClick={handleCancelClick}\r\n                      />\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <ReadOnlyRowRoute\r\n                        route={currRoute}\r\n                        handleEditClick={handleEditClick}\r\n                        handleDeleteClick={handleDeleteClick}\r\n                      />\r\n                    );\r\n                  }\r\n                }\r\n                return <></>;\r\n              })}\r\n            </tbody>\r\n          </Table>\r\n        </form>\r\n      ) : (\r\n        <Spinner style={{ color: \"white\" }} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrganizerPanelRoutes;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}